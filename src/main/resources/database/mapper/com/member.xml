<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.com.member">


	<insert id="insertMember" parameterType="acornMap">
		INSERT INTO JH_MEMBER
			(M_NAME, M_ID, M_PW, M_NICKNAME, M_EMAIL, M_BIRTH, M_BIRTH_YN, M_DEL_YN, M_JOIN_COMP_DT, M_VACT_CNT)
		VALUES
		    (#{mName}, #{mId}, #{mPw}, #{mNickname}, #{mEmail}, #{mBirth}, #{mBirthYn}, 'N', #{mJoinCompDt}, #{mVactCnt})
		<selectKey keyProperty="mSeq" resultType="String" order="AFTER">
			SELECT LAST_INSERT_ID() AS M_SEQ
		</selectKey>
	</insert>

	<insert id="insertProfile" parameterType="acornMap">
		INSERT INTO acorncalendar.JH_FILE
			(F_TYPE, F_TYPE_SEQ, F_OG_NAME, F_SV_NAME, F_SIZE, F_MAIN_YN, F_DEL_YN)
		VALUES(#{fType}, #{fTypeSeq}, #{fOgName}, #{fSvName}, #{fSize}, 'Y', 'N');
	</insert>

	<select id="selectIdCheck" parameterType="acornMap" resultType="int">
		SELECT COUNT(1)
		FROM JH_MEMBER
		WHERE M_ID = #{mId}
	</select>

	<select id="selectNicknameCheck" parameterType="acornMap" resultType="int">
		SELECT COUNT(1)
		FROM JH_MEMBER
		WHERE M_NICKNAME = #{mNickname}
	</select>

	<select id="selectEmailCheck" parameterType="acornMap" resultType="int">
		SELECT COUNT(1)
		FROM JH_MEMBER
		WHERE M_EMAIL = #{mEmail}
	</select>

	<select id="selectLogin" parameterType="acornMap" resultType="acornMap">
		SELECT M_SEQ, M_NAME, M_ID, M_PW, M_NICKNAME, M_EMAIL, M_BIRTH, M_BIRTH_YN, M_DEL_YN
		FROM JH_MEMBER
		WHERE M_ID = #{mId}
		AND M_DEL_YN = 'N'
	</select>



</mapper>