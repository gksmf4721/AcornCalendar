<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"  layout:decorate="layout/main_layout">
    <th:block layout:fragment="mainContent">
        <div class="cal_content">
            <div class="cal_item">
                <div class="title_wrap">
                    <div class="title_center">내정보</div>
                </div>
            </div>

            <div class="cal_item">
                <div class="title_wrap">
                    <div class="title_center">그룹웨어</div>
                </div>
                    <div>입사일자</div>
                    <div>-</div>
                    <div>남은 휴가 개수</div>
                    <div>-</div>
                    <div>사용한 휴가 개수</div>
                    <div>-</div>
            </div>

            <div class="cal_item">
                <div class="title_wrap">
                    <div class="title_center">캘린더</div>
                    <div class="title_right" id="calAdd">PLUS</div>
                </div>
                <div class="calendar_container">
                    <div id="calendar"></div>
                </div>
            </div>
        </div>
        
        <!-- 모달창 팝업 -->
        <button id="modalOpenButton">모달창</button>
        <div id="modalContainer" class="hidden">
		  <div id="modalContent">
		    <p>모달 창 입니다.</p>
		    <button id="modalCloseButton">닫기</button>
		  </div>
		</div>
        
        <div id="calAddContainer" class="hidden">
        	<div id="calAddContent">
        		<input type="text" id="title" placeholder="타이틀">
        		시작일<input type="date" id="start-date">
        		종료일<input type="date" id="end-date">
        		<input type="button" value="저장" id="calAddBtn">
        	</div>
        </div>
        
        
	<script>
	const modalOpenButton = document.getElementById('modalOpenButton');
	const modalCloseButton = document.getElementById('modalCloseButton');
	const modal = document.getElementById('modalContainer');

	modalOpenButton.addEventListener('click', () => {
	  modal.classList.remove('hidden');
	});

	modalCloseButton.addEventListener('click', () => {
	  modal.classList.add('hidden');
	});
	
	
	document.addEventListener('DOMContentLoaded', function(){
	    // calendar Element 취득
	    var calendarEl = document.getElementById('calendar'); 
	    // full-calendar 생성
	    var calendar = new FullCalendar.Calendar(calendarEl, {
	        // plugins: ['dayGrid', 'timeGrid', 'list' ],
	        initialView : 'dayGridMonth',    //초기 로드 될때 보이는 캘린더 화면 (기본 설정 : 달)
	        headerToolbar: {    //달력 헤더 부분
	            start: 'dayGridMonth,timeGridWeek,timeGridDay', //왼쪽 : 월별, 주별, 일별
	            center: 'title',    //가운데 타이틀 => titleFormat으로 YYYY년 MM월로 변경함
	            end: 'prev,next'    //오른쪽 : prevYear(전년), nextYear(내년), prev(바로전), next(바로후)
	          },
	        titleFormat:function(date){
	            return `${date.date.year}년 ${date.date.month + 1}월`;
	        },
	        navLinks: true, // can click day/week names to navigate views
	        editable: true,
	        selectable: true,
	        dragScroll: true,
	        // height: "59%",    //전체길이
	        // height: inherit,
	        contentHeight: 600,
	        aspectRatio: 1.35,
	        events: [
	            {
	              title: 'All Day Event',
	              start: '2023-11-05',
	              end : '2023-11-08'
	            },
	        ]
	    });
	    calendar.render();
	});
	
	//캘린더 추가 이벤트
	const calendarAddBtn = document.getElementById("calAddBtn");
	calendarAddBtn.addEventListener('click', () => {
		var calendarEl = document.getElementById('calendar'); 
		var calendar = new FullCalendar.Calendar(calendarEl, {
			  events: [
			    { // this object will be "parsed" into an Event Object
			      title: 'The Title', // a property!
			      start: '2023-11-6', // a property!
			      end: '2023-11-8' // a property! ** see important note below about 'end' **
			    }
			  ]
			});
		calendar.render();
	});
	
	</script>        
</th:block>

</html>